import{r as o,d as Ce,b as Me,g as Ee,o as Se,s as Le,c as Oe,e as Pe,u as A,j as e,P as x,f as ee,h as K,i as Re,k as Ie,M as Fe,F as $e,m as He,n as Ue,T as B,L as Ge,p as We,q as Z,t as Be}from"./index-Ckl99Cgo.js";import{T as z,F as Ae}from"./TaskForm-D1AW1tn7.js";function Ke({title:r,titleId:n,...a},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const q=o.forwardRef(Ke);function ze({title:r,titleId:n,...a},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Ve=o.forwardRef(ze);function Xe({title:r,titleId:n,...a},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const Je=o.forwardRef(Xe);function Ye({title:r,titleId:n,...a},l){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},a),r?o.createElement("title",{id:n},r):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const Qe=o.forwardRef(Ye);class Ze{prefDocRef(n){return Ce(Me,"users",n,"settings","preferences")}async getPreferences(n){const a=this.prefDocRef(n),l=await Ee(a);return l.exists()?l.data():null}subscribe(n,a){const l=this.prefDocRef(n);return Se(l,c=>{if(!c.exists())return a(null);a(c.data())})}async setTheme(n,a){try{const l=this.prefDocRef(n);return await Le(l,{theme:a,updatedAt:Oe()},{merge:!0}),{error:null}}catch(l){return{error:Pe(l)}}}}const _=new Ze,qe=()=>{const[r,n]=o.useState(!1),{user:a}=A();o.useEffect(()=>{const c=document.documentElement,i=c.classList.contains("dark");if(n(i),!a)return;const h=_.subscribe(a.uid,m=>{const y=m==null?void 0:m.theme;if(!y)return;const p=y==="dark";c.classList.toggle("dark",p),n(p);try{localStorage.setItem("theme",p?"dark":"light")}catch{}});return()=>{h&&h()}},[a]);const l=async()=>{const c=document.documentElement,i=!r;c.classList.toggle("dark",i),n(i);try{localStorage.setItem("theme",i?"dark":"light")}catch{}if(a)try{await _.setTheme(a.uid,i?"dark":"light")}catch{}};return e.jsx("button",{type:"button",onClick:l,"aria-pressed":r,title:r?"Switch to light mode":"Switch to dark mode",className:"inline-flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-600 p-2 text-gray-600 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:r?e.jsx(Qe,{className:"w-5 h-5"}):e.jsx(Je,{className:"w-5 h-5"})})};function _e(r,n){const a=new Date;a.setHours(0,0,0,0);const l=new Date(n);if(l.setHours(0,0,0,0),r.isCompleted)return{task:r,displayDate:l,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:!1};if(!r.startDate){if(!r.dueDate)return{task:r,displayDate:l,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:!1};const f=new Date(r.dueDate);f.setHours(0,0,0,0);const v=f<a,O=f.getTime()===l.getTime();return{task:r,displayDate:l,isOverdue:v,isUrgent:v,urgencyLevel:v?"critical":"normal",shouldDisplay:O}}const c=new Date(r.startDate);c.setHours(0,0,0,0);const i=r.dueDate?new Date(r.dueDate):null;if(i&&i.setHours(0,0,0,0),a<c){const f=l.getTime()===c.getTime();return{task:r,displayDate:c,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:f}}if(i&&a>i){const f=l.getTime()===i.getTime();return{task:r,displayDate:i,isOverdue:!0,isUrgent:!0,urgencyLevel:"critical",shouldDisplay:f}}const h=l.getTime()===a.getTime();if(!i)return{task:r,displayDate:a,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:h};const m=Math.max(1,Math.ceil((i.getTime()-c.getTime())/(1e3*60*60*24))),y=Math.ceil((i.getTime()-a.getTime())/(1e3*60*60*24)),p=(m-y)/m;let b="normal",g=!1;return y<=1?(b="critical",g=!0):y<=3||p>=.8?(b="urgent",g=!0):p>=.6&&(b="urgent",g=!1),{task:r,displayDate:a,isOverdue:!1,isUrgent:g,urgencyLevel:b,shouldDisplay:h}}function te(r,n){return r.map(a=>_e(a,n)).filter(a=>a.shouldDisplay)}function et(r,n){return n==="critical"?x.URGENT:n==="urgent"&&r.priority!==x.URGENT?x.HIGH:r.priority}const tt=({isOpen:r,onClose:n,selectedDate:a,tasks:l})=>{const{getGroupById:c}=ee(),{deleteTask:i}=K(),{user:h}=A(),{confirm:m,ConfirmComponent:y}=Re(),{showToast:p}=Ie(),[b,g]=o.useState(null),[f,v]=o.useState(!1);if(!a)return null;const D=te(l,a).sort((s,w)=>{if(s.urgencyLevel!==w.urgencyLevel){const T={critical:3,urgent:2,normal:1};return T[w.urgencyLevel]-T[s.urgencyLevel]}const N={[x.URGENT]:4,[x.HIGH]:3,[x.MEDIUM]:2,[x.LOW]:1};return N[w.task.priority]-N[s.task.priority]}),F=s=>s.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),H=s=>{switch(s){case x.URGENT:return"bg-red-500";case x.HIGH:return"bg-orange-500";case x.MEDIUM:return"bg-yellow-500";case x.LOW:return"bg-green-500";default:return"bg-gray-500"}},U=s=>{switch(s){case x.URGENT:return"Kh·∫©n c·∫•p";case x.HIGH:return"Cao";case x.MEDIUM:return"Trung b√¨nh";case x.LOW:return"Th·∫•p";default:return"Kh√¥ng x√°c ƒë·ªãnh"}},S=s=>{switch(s){case"critical":return"C·ª±c k·ª≥ kh·∫©n c·∫•p";case"urgent":return"Kh·∫©n c·∫•p";default:return""}},$=s=>{g(s)},G=s=>{h&&m("X√≥a c√¥ng vi·ªác",`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a c√¥ng vi·ªác "${s.title}"?`,async()=>{v(!0);try{await i(h.uid,s.id),p("ƒê√£ x√≥a c√¥ng vi·ªác th√†nh c√¥ng","success")}catch{p("C√≥ l·ªói x·∫£y ra khi x√≥a c√¥ng vi·ªác","error")}finally{v(!1)}},"danger","X√≥a c√¥ng vi·ªác")};return e.jsxs(e.Fragment,{children:[e.jsxs(Fe,{isOpen:r&&!b,onClose:n,title:`C√¥ng vi·ªác ng√†y ${F(a)}`,className:"max-w-2xl",children:[e.jsx("div",{className:"max-h-96 overflow-y-auto",children:D.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Kh√¥ng c√≥ c√¥ng vi·ªác n√†o trong ng√†y n√†y"})}):e.jsx("div",{className:"space-y-3",children:D.map(({task:s,isOverdue:w,urgencyLevel:N})=>{const T=s.groupId?c(s.groupId):null;return e.jsx("div",{className:`p-4 rounded-lg border ${w?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":N==="critical"?"border-red-200 bg-red-25 dark:border-red-700 dark:bg-red-900/10":N==="urgent"?"border-orange-200 bg-orange-25 dark:border-orange-700 dark:bg-orange-900/10":"border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-700"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${H(s.priority)}`}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.title}),w&&e.jsx("span",{className:"text-red-600 font-bold text-sm",title:"Qu√° h·∫°n",children:"‚ö† Qu√° h·∫°n"}),!w&&N==="critical"&&e.jsxs("span",{className:"text-red-500 font-bold text-sm",title:"C·ª±c k·ª≥ kh·∫©n c·∫•p",children:["üî• ",S(N)]}),!w&&N==="urgent"&&e.jsxs("span",{className:"text-orange-500 font-bold text-sm",title:"Kh·∫©n c·∫•p",children:["‚ö° ",S(N)]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:s.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"ƒê·ªô ∆∞u ti√™n:"}),e.jsx("span",{className:"font-medium",children:U(s.priority)})]}),T&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Nh√≥m:"}),e.jsxs("span",{className:"font-medium",children:[T.icon," ",T.name]})]}),s.startDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"B·∫Øt ƒë·∫ßu:"}),e.jsx("span",{className:"font-medium",children:new Date(s.startDate).toLocaleDateString("vi-VN")})]}),s.dueDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"H·∫°n cu·ªëi:"}),e.jsx("span",{className:"font-medium",children:new Date(s.dueDate).toLocaleDateString("vi-VN")})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>$(s),className:"text-gray-400 hover:text-blue-600 transition-colors p-1 rounded",title:"Ch·ªânh s·ª≠a c√¥ng vi·ªác",disabled:f,children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(s),className:"text-gray-400 hover:text-red-600 transition-colors p-1 rounded",title:"X√≥a c√¥ng vi·ªác",disabled:f,children:e.jsx(He,{className:"w-4 h-4"})})]})]})},s.id)})})}),D.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("span",{children:["T·ªïng c·ªông: ",D.length," c√¥ng vi·ªác"]}),e.jsxs("div",{className:"flex space-x-4",children:[D.filter(s=>s.urgencyLevel==="critical"||s.isOverdue).length>0&&e.jsxs("span",{className:"text-red-600",children:["Kh·∫©n c·∫•p: ",D.filter(s=>s.urgencyLevel==="critical"||s.isOverdue).length]}),D.filter(s=>s.urgencyLevel==="urgent"&&!s.isOverdue).length>0&&e.jsxs("span",{className:"text-orange-600",children:["C·∫ßn ch√∫ √Ω: ",D.filter(s=>s.urgencyLevel==="urgent"&&!s.isOverdue).length]})]})]})}),e.jsx(y,{})]}),b&&e.jsx(z,{task:b,onClose:()=>g(null),onSuccess:()=>{g(null),p("C·∫≠p nh·∫≠t c√¥ng vi·ªác th√†nh c√¥ng","success")}})]})},rt=({tasks:r})=>{const[n,a]=o.useState(new Date),[l,c]=o.useState(null),[i,h]=o.useState(null),[m,y]=o.useState(null),[p,b]=o.useState(null),[g,f]=o.useState(null),[v,O]=o.useState(null),[D,F]=o.useState(!1),[H,U]=o.useState(null),{user:S}=A(),{getGroupById:$,getDefaultGroup:G}=ee(),{filters:s,toggleTaskCompletion:w,updateTask:N}=K(),T=s.groupId?r.filter(t=>t.groupId===s.groupId):r,C=n.getFullYear(),M=n.getMonth(),re=new Date,se=new Date(C,M,1),ae=new Date(C,M+1,0).getDate(),ne=se.getDay(),oe=new Date(C,M-1,0),le=ne,P=[];for(let t=le;t>0;t--){const d=oe.getDate()-t+1,j=new Date(C,M-1,d);P.push({date:j,day:d,isCurrentMonth:!1,isToday:!1})}for(let t=1;t<=ae;t++){const d=new Date(C,M,t),j=d.toDateString()===re.toDateString();P.push({date:d,day:t,isCurrentMonth:!0,isToday:j})}const ie=42-P.length;for(let t=1;t<=ie;t++){const d=new Date(C,M+1,t);P.push({date:d,day:t,isCurrentMonth:!1,isToday:!1})}const ce=t=>te(T,t),de=()=>{a(new Date(C,M-1,1))},ge=()=>{a(new Date(C,M+1,1))},ue=()=>{a(new Date)},V=t=>{U(t),F(!0)},xe=(t,d)=>{t.preventDefault(),t.stopPropagation(),!d.isCompleted&&h({x:t.clientX,y:t.clientY,task:d})},X=async t=>{if(S)try{await w(S.uid,t.id,!0),h(null)}catch(d){console.error("Failed to mark task as done:",d)}},J=()=>{h(null),f(null)},he=(t,d)=>{if(d.isCompleted){t.preventDefault();return}y(d),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",d.id)},me=(t,d)=>{t.preventDefault(),t.dataTransfer.dropEffect="move",b(d)},pe=()=>{b(null)},fe=async(t,d)=>{if(t.preventDefault(),b(null),!m||!S)return;const j=new Date(d);j.setHours(23,59,59,999);try{await N(S.uid,m.id,{dueDate:j}),y(null)}catch(R){console.error("Failed to update task due date:",R),y(null)}},ye=()=>{y(null),b(null)},be=(t,d)=>{if(d.isCompleted)return;const j=t.touches[0],R=setTimeout(()=>{f({task:d,x:j.clientX,y:j.clientY})},500);O(R)},ve=()=>{v&&(clearTimeout(v),O(null))},je=()=>{v&&(clearTimeout(v),O(null))};o.useEffect(()=>{if(i||g)return document.addEventListener("click",J),()=>document.removeEventListener("click",J)},[i,g]),o.useEffect(()=>()=>{v&&clearTimeout(v)},[v]);const ke=t=>{switch(t){case x.URGENT:return"bg-red-500";case x.HIGH:return"bg-orange-500";case x.MEDIUM:return"bg-yellow-500";case x.LOW:return"bg-green-500";default:return"bg-gray-500"}},we=["January","February","March","April","May","June","July","August","September","October","November","December"],Ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y=(()=>{if(s.groupId){const t=$(s.groupId);return t?`${t.icon} ${t.name}`:"Unknown Group"}return null})();return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[we[M]," ",C]}),Y&&e.jsxs("span",{className:"text-sm text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 px-2 py-1 rounded-full",children:["Filtered by: ",Y]}),e.jsx("button",{onClick:ue,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:de,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsx("button",{onClick:ge,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Ue,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Ne.map(t=>e.jsx("div",{className:"p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:P.map((t,d)=>{const j=ce(t.date),R=(p==null?void 0:p.toDateString())===t.date.toDateString();return e.jsxs("div",{className:`min-h-[96px] p-2 border border-gray-200 dark:border-gray-700 rounded-lg transition-colors cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${t.isCurrentMonth?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"} ${t.isToday?"ring-2 ring-primary-500":""} ${R?"bg-primary-50 dark:bg-primary-900/20 border-primary-300 dark:border-primary-700 border-2":""}`,onDragOver:E=>me(E,t.date),onDragLeave:pe,onDrop:E=>fe(E,t.date),onDoubleClick:()=>V(t.date),title:"Double-click ƒë·ªÉ xem t·∫•t c·∫£ c√¥ng vi·ªác trong ng√†y",children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${t.isCurrentMonth?t.isToday?"text-primary-600 dark:text-primary-400":"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}`,children:t.day}),e.jsxs("div",{className:"space-y-1",children:[j.slice(0,4).map(E=>{const{task:k,isOverdue:I,urgencyLevel:L}=E,W=k.groupId?$(k.groupId):G(),De=et(k,L),Te=()=>I?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border border-red-300 dark:border-red-700":L==="critical"?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300 border border-red-200 dark:border-red-800":L==="urgent"?"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300 border border-orange-200 dark:border-orange-800":"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200";return e.jsx("div",{draggable:!k.isCompleted,className:`text-xs p-1 rounded truncate transition-all duration-200 ${Te()} cursor-move hover:opacity-80 ${(m==null?void 0:m.id)===k.id?"opacity-50 scale-95":""}`,title:`${k.title} - ${(W==null?void 0:W.name)||"Default"} ${I?"(OVERDUE)":L==="critical"?"(CRITICAL)":L==="urgent"?"(URGENT)":""}`,onDragStart:u=>{u.stopPropagation(),he(u,k)},onDragEnd:u=>{u.stopPropagation(),ye()},onDoubleClick:u=>{u.stopPropagation(),c(k)},onContextMenu:u=>{u.stopPropagation(),xe(u,k)},onTouchStart:u=>{u.stopPropagation(),be(u,k)},onTouchEnd:u=>{u.stopPropagation(),ve()},onTouchMove:u=>{u.stopPropagation(),je()},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1 flex-1 min-w-0",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${ke(De)}`}),e.jsx("span",{className:"truncate",children:k.title}),I&&e.jsx("span",{className:"text-red-600 font-bold",title:"Overdue",children:"‚ö†"}),!I&&L==="critical"&&e.jsx("span",{className:"text-red-500 font-bold",title:"Critical urgency",children:"üî•"}),!I&&L==="urgent"&&e.jsx("span",{className:"text-orange-500 font-bold",title:"Urgent",children:"‚ö°"})]}),e.jsx("button",{className:"ml-1 text-gray-400 hover:text-gray-600 lg:hidden flex-shrink-0",onClick:u=>{u.stopPropagation();const Q=u.currentTarget.getBoundingClientRect();f({task:k,x:Q.right,y:Q.bottom})},onDoubleClick:u=>u.stopPropagation(),"aria-label":"T√πy ch·ªçn task",children:"‚ãÆ"}),e.jsx("span",{className:"text-gray-400 text-xs hidden lg:block",children:"‚ãÆ‚ãÆ"})]})},k.id)}),j.length>4&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center cursor-pointer hover:text-gray-700 dark:hover:text-gray-300",onClick:E=>{E.stopPropagation(),V(t.date)},onDoubleClick:E=>E.stopPropagation(),title:"Click ƒë·ªÉ xem t·∫•t c·∫£ c√¥ng vi·ªác",children:["+",j.length-4," more"]})]})]},d)})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{children:"Urgent"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsx("span",{children:"High"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{children:"Medium"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Low"})]})]}),i&&e.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 z-50",style:{left:i.x,top:i.y},onClick:t=>t.stopPropagation(),children:[e.jsxs("button",{onClick:()=>X(i.task),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Ho√†n th√†nh"})]}),e.jsxs("button",{onClick:()=>{c(i.task),h(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Ch·ªânh s·ª≠a"})]})]}),g&&e.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 z-50",style:{left:g.x,top:g.y},onClick:t=>t.stopPropagation(),children:[e.jsxs("button",{onClick:()=>{X(g.task),f(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Ho√†n th√†nh"})]}),e.jsxs("button",{onClick:()=>{c(g.task),f(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Ch·ªânh s·ª≠a"})]})]}),l&&e.jsx(z,{task:l,onClose:()=>c(null),onSuccess:()=>c(null)}),e.jsx(tt,{isOpen:D,onClose:()=>F(!1),selectedDate:H,tasks:T})]})},lt=()=>{const{tasks:r,loading:n,fetchTasks:a}=K(),[l,c]=o.useState(!1),[i,h]=o.useState({total:0,completed:0,pending:0,overdue:0});return o.useEffect(()=>{a()},[a]),o.useEffect(()=>{const m=new Date,y=r.filter(g=>g.status===B.COMPLETED).length,p=r.filter(g=>g.status!==B.COMPLETED).length,b=r.filter(g=>g.dueDate&&g.dueDate<m&&g.status!==B.COMPLETED).length;h({total:r.length,completed:y,pending:p,overdue:b})},[r]),n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ge,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",children:[e.jsx(We,{className:"w-5 h-5 mr-2"}),"New Task"]})]}),e.jsx(qe,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Z,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Z,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.completed})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.pending})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.overdue})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Calendar"})}),e.jsxs("div",{className:"p-6",children:[e.jsx(rt,{tasks:r}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Double-click v√†o ng√†y ƒë·ªÉ xem chi ti·∫øt c√¥ng vi·ªác"})})]})]}),l&&e.jsx(z,{onClose:()=>c(!1),onSuccess:()=>c(!1)})]})};export{lt as default};
