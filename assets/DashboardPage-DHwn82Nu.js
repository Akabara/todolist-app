import{r as n,d as j,c as w,g as p,o as b,s as k,e as y,f as N,u as v,j as e,h as E,T as x,L as D,F as T,i as g,k as S}from"./index-CMJAelHt.js";import{T as C}from"./TaskForm-ulfx5JSn.js";import{D as L}from"./DashboardCalendar-B3affS3d.js";import{F as R}from"./ClockIcon-bVt4exd-.js";function F({title:r,titleId:s,...t},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const M=n.forwardRef(F);function P({title:r,titleId:s,...t},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),r?n.createElement("title",{id:s},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const O=n.forwardRef(P);class ${prefDocRef(s){return j(w,"users",s,"settings","preferences")}async getPreferences(s){const t=this.prefDocRef(s),a=await p(t);return a.exists()?a.data():null}subscribe(s,t){const a=this.prefDocRef(s);return b(a,l=>{if(!l.exists())return t(null);t(l.data())})}async setTheme(s,t){try{const a=this.prefDocRef(s);return await k(a,{theme:t,updatedAt:y()},{merge:!0}),{error:null}}catch(a){return{error:N(a)}}}}const u=new $,A=()=>{const[r,s]=n.useState(!1),{user:t}=v();n.useEffect(()=>{const l=document.documentElement,d=l.classList.contains("dark");if(s(d),!t)return;const c=u.subscribe(t.uid,i=>{const h=i==null?void 0:i.theme;if(!h)return;const m=h==="dark";l.classList.toggle("dark",m),s(m);try{localStorage.setItem("theme",m?"dark":"light")}catch{}});return()=>{c&&c()}},[t]);const a=async()=>{const l=document.documentElement,d=!r;l.classList.toggle("dark",d),s(d);try{localStorage.setItem("theme",d?"dark":"light")}catch{}if(t)try{await u.setTheme(t.uid,d?"dark":"light")}catch{}};return e.jsx("button",{type:"button",onClick:a,"aria-pressed":r,title:r?"Switch to light mode":"Switch to dark mode",className:"inline-flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-600 p-2 text-gray-600 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:r?e.jsx(O,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})})},z=()=>{const{tasks:r,loading:s,fetchTasks:t}=E(),[a,l]=n.useState(!1),[d,c]=n.useState({total:0,completed:0,pending:0,overdue:0});return n.useEffect(()=>{t()},[t]),n.useEffect(()=>{const i=new Date,h=r.filter(o=>o.status===x.COMPLETED).length,m=r.filter(o=>o.status!==x.COMPLETED).length,f=r.filter(o=>o.dueDate&&o.dueDate<i&&o.status!==x.COMPLETED).length;c({total:r.length,completed:h,pending:m,overdue:f})},[r]),s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(D,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsxs("button",{onClick:()=>l(!0),className:"btn-primary flex items-center",children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"New Task"]})]}),e.jsx(A,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:d.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:d.completed})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(R,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:d.pending})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(S,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:d.overdue})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Calendar"})}),e.jsx("div",{className:"p-6",children:e.jsx(L,{tasks:r})})]}),a&&e.jsx(C,{onClose:()=>l(!1),onSuccess:()=>l(!1)})]})};export{z as default};
