import{j as r,N as f,r as i}from"./vendor-C0uaCzFa.js";import{i as S,g as k,a as E,s as N,c as L,u as P,b as D}from"./firebase-vendor-CwXsO73q.js";import{c as I}from"./state-vendor-C6akDs4E.js";const y=I(e=>({user:null,loading:!0,setUser:t=>e({user:t}),setLoading:t=>e({loading:t})})),V=(e,t)=>{},W=(e,t)=>{},A=()=>!(Object.entries({apiKey:"AIzaSyDj6zjLLToxsPo3Fif15Zmg7OwMRomGQ90",authDomain:"todolistapp-9af4f.firebaseapp.com",projectId:"todolistapp-9af4f",storageBucket:"todolistapp-9af4f.firebasestorage.app",messagingSenderId:"80191071737",appId:"1:80191071737:web:2ee6ffdb1ac634876c4928"}).filter(([,a])=>!a).map(([a])=>a).length>0),C={apiKey:"AIzaSyDj6zjLLToxsPo3Fif15Zmg7OwMRomGQ90",authDomain:"todolistapp-9af4f.firebaseapp.com",projectId:"todolistapp-9af4f",storageBucket:"todolistapp-9af4f.firebasestorage.app",messagingSenderId:"80191071737",appId:"1:80191071737:web:2ee6ffdb1ac634876c4928"};A();const x=S(C),l=k(x),_=E(x),d=e=>{switch(e?.code||""){case"auth/invalid-email":return"Email không hợp lệ";case"auth/user-not-found":return"Tài khoản không tồn tại";case"auth/wrong-password":case"auth/invalid-credential":return"Mật khẩu không đúng";case"auth/weak-password":return"Mật khẩu quá yếu (tối thiểu 6 ký tự)";case"auth/email-already-in-use":return"Email đã được sử dụng";case"auth/too-many-requests":return"Quá nhiều lần thử. Vui lòng thử lại sau";case"auth/network-request-failed":return"Lỗi kết nối mạng";case"permission-denied":return"Bạn không có quyền thực hiện thao tác này";case"unauthenticated":return"Vui lòng đăng nhập lại";case"unavailable":return"Dịch vụ tạm thời không khả dụng";case"deadline-exceeded":return"Thao tác quá thời gian chờ";case"resource-exhausted":return"Tài nguyên đã hết. Vui lòng thử lại sau";case"invalid-argument":return"Dữ liệu không hợp lệ";case"not-found":return"Không tìm thấy dữ liệu";case"already-exists":return"Dữ liệu đã tồn tại";case"aborted":return"Thao tác bị hủy do xung đột";default:return"Có lỗi xảy ra. Vui lòng thử lại"}},q=async(e,t)=>{try{return{user:(await N(l,e,t)).user,error:null}}catch(a){return{user:null,error:d(a)}}},z=async(e,t,a)=>{try{const s=await L(l,e,t);return a&&s.user&&await P(s.user,{displayName:a}),{user:s.user,error:null}}catch(s){return{user:null,error:d(s)}}},B=async()=>{try{return await D(l),{error:null}}catch(e){return{error:d(e)}}},T=({size:e="md",className:t=""})=>{const a={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return r.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-primary-600 ${a[e]} ${t}`})},K=({children:e})=>{const{user:t}=y();return t?r.jsx(r.Fragment,{children:e}):r.jsx(f,{to:"/login",replace:!0})},F=()=>{const[e,t]=i.useState(!0),[a,s]=i.useState(""),[u,b]=i.useState(""),[g,j]=i.useState(""),[p,h]=i.useState(!1),[m,c]=i.useState(""),{user:v}=y();if(v)return r.jsx(f,{to:"/",replace:!0});const w=async n=>{n.preventDefault(),h(!0),c("");try{let o;e?o=await q(a,u):o=await z(a,u,g),o.error&&c(o.error)}catch{c("An unexpected error occurred")}finally{h(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsx("div",{children:r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e?"Sign in to your account":"Create your account"})}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[r.jsxs("div",{className:"space-y-4",children:[!e&&r.jsx("div",{children:r.jsx("input",{type:"text",required:!0,className:"input-field",placeholder:"Display Name",value:g,onChange:n=>j(n.target.value)})}),r.jsx("div",{children:r.jsx("input",{type:"email",required:!0,className:"input-field",placeholder:"Email address",value:a,onChange:n=>s(n.target.value)})}),r.jsx("div",{children:r.jsx("input",{type:"password",required:!0,className:"input-field",placeholder:"Password",value:u,onChange:n=>b(n.target.value)})})]}),m&&r.jsx("div",{className:"text-red-600 text-sm text-center",children:m}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:p?r.jsx(T,{size:"sm"}):e?"Sign in":"Sign up"})}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",className:"text-primary-600 hover:text-primary-500",onClick:()=>t(!e),children:e?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})},Q=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));export{T as L,K as P,V as a,l as b,W as c,_ as d,Q as e,d as g,B as l,y as u};
