import{r as l,d as Ce,c as Me,g as Ee,o as Le,s as Se,e as Oe,f as Pe,u as z,j as e,P as h,h as V,M as Ie,i as J,F as Re,T as P,L as He,k as Fe,m as B,n as Ue}from"./index-8hedWw4_.js";import{T as Y,F as $e}from"./TaskForm-BrxP2G_t.js";function Ge({title:s,titleId:n,...a},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},a),s?l.createElement("title",{id:n},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const A=l.forwardRef(Ge);function We({title:s,titleId:n,...a},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},a),s?l.createElement("title",{id:n},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Be=l.forwardRef(We);function Ae({title:s,titleId:n,...a},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},a),s?l.createElement("title",{id:n},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const Ke=l.forwardRef(Ae);function ze({title:s,titleId:n,...a},o){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},a),s?l.createElement("title",{id:n},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const Ve=l.forwardRef(ze);class Je{prefDocRef(n){return Ce(Me,"users",n,"settings","preferences")}async getPreferences(n){const a=this.prefDocRef(n),o=await Ee(a);return o.exists()?o.data():null}subscribe(n,a){const o=this.prefDocRef(n);return Le(o,c=>{if(!c.exists())return a(null);a(c.data())})}async setTheme(n,a){try{const o=this.prefDocRef(n);return await Se(o,{theme:a,updatedAt:Oe()},{merge:!0}),{error:null}}catch(o){return{error:Pe(o)}}}}const K=new Je,Ye=()=>{const[s,n]=l.useState(!1),{user:a}=z();l.useEffect(()=>{const c=document.documentElement,i=c.classList.contains("dark");if(n(i),!a)return;const g=K.subscribe(a.uid,p=>{const y=p==null?void 0:p.theme;if(!y)return;const f=y==="dark";c.classList.toggle("dark",f),n(f);try{localStorage.setItem("theme",f?"dark":"light")}catch{}});return()=>{g&&g()}},[a]);const o=async()=>{const c=document.documentElement,i=!s;c.classList.toggle("dark",i),n(i);try{localStorage.setItem("theme",i?"dark":"light")}catch{}if(a)try{await K.setTheme(a.uid,i?"dark":"light")}catch{}};return e.jsx("button",{type:"button",onClick:o,"aria-pressed":s,title:s?"Switch to light mode":"Switch to dark mode",className:"inline-flex items-center justify-center rounded-lg border border-gray-300 dark:border-gray-600 p-2 text-gray-600 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:s?e.jsx(Ve,{className:"w-5 h-5"}):e.jsx(Ke,{className:"w-5 h-5"})})};function Qe(s,n){const a=new Date;a.setHours(0,0,0,0);const o=new Date(n);if(o.setHours(0,0,0,0),s.isCompleted)return{task:s,displayDate:o,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:!1};if(!s.startDate){if(!s.dueDate)return{task:s,displayDate:o,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:!1};const u=new Date(s.dueDate);u.setHours(0,0,0,0);const x=u<a,k=u.getTime()===o.getTime();return{task:s,displayDate:o,isOverdue:x,isUrgent:x,urgencyLevel:x?"critical":"normal",shouldDisplay:k}}const c=new Date(s.startDate);c.setHours(0,0,0,0);const i=s.dueDate?new Date(s.dueDate):null;if(i&&i.setHours(0,0,0,0),a<c){const u=o.getTime()===c.getTime();return{task:s,displayDate:c,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:u}}if(i&&a>i){const u=o.getTime()===i.getTime();return{task:s,displayDate:i,isOverdue:!0,isUrgent:!0,urgencyLevel:"critical",shouldDisplay:u}}const g=o.getTime()===a.getTime();if(!i)return{task:s,displayDate:a,isOverdue:!1,isUrgent:!1,urgencyLevel:"normal",shouldDisplay:g};const p=Math.max(1,Math.ceil((i.getTime()-c.getTime())/(1e3*60*60*24))),y=Math.ceil((i.getTime()-a.getTime())/(1e3*60*60*24)),f=(p-y)/p;let b="normal",r=!1;return y<=1?(b="critical",r=!0):y<=3||f>=.8?(b="urgent",r=!0):f>=.6&&(b="urgent",r=!1),{task:s,displayDate:a,isOverdue:!1,isUrgent:r,urgencyLevel:b,shouldDisplay:g}}function Q(s,n){return s.map(a=>Qe(a,n)).filter(a=>a.shouldDisplay)}function Xe(s,n){return n==="critical"?h.URGENT:n==="urgent"&&s.priority!==h.URGENT?h.HIGH:s.priority}const Ze=({isOpen:s,onClose:n,selectedDate:a,tasks:o})=>{const{getGroupById:c}=V();if(!a)return null;const g=Q(o,a).sort((r,u)=>{if(r.urgencyLevel!==u.urgencyLevel){const k={critical:3,urgent:2,normal:1};return k[u.urgencyLevel]-k[r.urgencyLevel]}const x={[h.URGENT]:4,[h.HIGH]:3,[h.MEDIUM]:2,[h.LOW]:1};return x[u.task.priority]-x[r.task.priority]}),p=r=>r.toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),y=r=>{switch(r){case h.URGENT:return"bg-red-500";case h.HIGH:return"bg-orange-500";case h.MEDIUM:return"bg-yellow-500";case h.LOW:return"bg-green-500";default:return"bg-gray-500"}},f=r=>{switch(r){case h.URGENT:return"Khẩn cấp";case h.HIGH:return"Cao";case h.MEDIUM:return"Trung bình";case h.LOW:return"Thấp";default:return"Không xác định"}},b=r=>{switch(r){case"critical":return"Cực kỳ khẩn cấp";case"urgent":return"Khẩn cấp";default:return""}};return e.jsxs(Ie,{isOpen:s,onClose:n,title:`Công việc ngày ${p(a)}`,className:"max-w-2xl",children:[e.jsx("div",{className:"max-h-96 overflow-y-auto",children:g.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:"Không có công việc nào trong ngày này"})}):e.jsx("div",{className:"space-y-3",children:g.map(({task:r,isOverdue:u,urgencyLevel:x})=>{const k=r.groupId?c(r.groupId):null;return e.jsx("div",{className:`p-4 rounded-lg border ${u?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":x==="critical"?"border-red-200 bg-red-25 dark:border-red-700 dark:bg-red-900/10":x==="urgent"?"border-orange-200 bg-orange-25 dark:border-orange-700 dark:bg-orange-900/10":"border-gray-200 bg-gray-50 dark:border-gray-600 dark:bg-gray-700"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${y(r.priority)}`}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:r.title}),u&&e.jsx("span",{className:"text-red-600 font-bold text-sm",title:"Quá hạn",children:"⚠ Quá hạn"}),!u&&x==="critical"&&e.jsxs("span",{className:"text-red-500 font-bold text-sm",title:"Cực kỳ khẩn cấp",children:["🔥 ",b(x)]}),!u&&x==="urgent"&&e.jsxs("span",{className:"text-orange-500 font-bold text-sm",title:"Khẩn cấp",children:["⚡ ",b(x)]})]}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:r.description}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Độ ưu tiên:"}),e.jsx("span",{className:"font-medium",children:f(r.priority)})]}),k&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Nhóm:"}),e.jsxs("span",{className:"font-medium",children:[k.icon," ",k.name]})]}),r.startDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Bắt đầu:"}),e.jsx("span",{className:"font-medium",children:new Date(r.startDate).toLocaleDateString("vi-VN")})]}),r.dueDate&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Hạn cuối:"}),e.jsx("span",{className:"font-medium",children:new Date(r.dueDate).toLocaleDateString("vi-VN")})]})]})]})})},r.id)})})}),g.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("span",{children:["Tổng cộng: ",g.length," công việc"]}),e.jsxs("div",{className:"flex space-x-4",children:[g.filter(r=>r.urgencyLevel==="critical"||r.isOverdue).length>0&&e.jsxs("span",{className:"text-red-600",children:["Khẩn cấp: ",g.filter(r=>r.urgencyLevel==="critical"||r.isOverdue).length]}),g.filter(r=>r.urgencyLevel==="urgent"&&!r.isOverdue).length>0&&e.jsxs("span",{className:"text-orange-600",children:["Cần chú ý: ",g.filter(r=>r.urgencyLevel==="urgent"&&!r.isOverdue).length]})]})]})})]})},qe=({tasks:s})=>{const[n,a]=l.useState(new Date),[o,c]=l.useState(null),[i,g]=l.useState(null),[p,y]=l.useState(null),[f,b]=l.useState(null),[r,u]=l.useState(null),[x,k]=l.useState(null),[X,I]=l.useState(!1),[Z,q]=l.useState(null),{user:L}=z(),{getGroupById:R,getDefaultGroup:_}=V(),{filters:S,toggleTaskCompletion:ee,updateTask:te}=J(),H=S.groupId?s.filter(t=>t.groupId===S.groupId):s,w=n.getFullYear(),N=n.getMonth(),re=new Date,se=new Date(w,N,1),ae=new Date(w,N+1,0).getDate(),ne=se.getDay(),oe=new Date(w,N-1,0),le=ne,C=[];for(let t=le;t>0;t--){const d=oe.getDate()-t+1,v=new Date(w,N-1,d);C.push({date:v,day:d,isCurrentMonth:!1,isToday:!1})}for(let t=1;t<=ae;t++){const d=new Date(w,N,t),v=d.toDateString()===re.toDateString();C.push({date:d,day:t,isCurrentMonth:!0,isToday:v})}const ie=42-C.length;for(let t=1;t<=ie;t++){const d=new Date(w,N+1,t);C.push({date:d,day:t,isCurrentMonth:!1,isToday:!1})}const ce=t=>Q(H,t),de=()=>{a(new Date(w,N-1,1))},ge=()=>{a(new Date(w,N+1,1))},ue=()=>{a(new Date)},F=t=>{q(t),I(!0)},xe=(t,d)=>{t.preventDefault(),t.stopPropagation(),!d.isCompleted&&g({x:t.clientX,y:t.clientY,task:d})},U=async t=>{if(L)try{await ee(L.uid,t.id,!0),g(null)}catch(d){console.error("Failed to mark task as done:",d)}},$=()=>{g(null),u(null)},me=(t,d)=>{if(d.isCompleted){t.preventDefault();return}y(d),t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",d.id)},he=(t,d)=>{t.preventDefault(),t.dataTransfer.dropEffect="move",b(d)},pe=()=>{b(null)},ye=async(t,d)=>{if(t.preventDefault(),b(null),!p||!L)return;const v=new Date(d);v.setHours(23,59,59,999);try{await te(L.uid,p.id,{dueDate:v}),y(null)}catch(M){console.error("Failed to update task due date:",M),y(null)}},fe=()=>{y(null),b(null)},be=(t,d)=>{if(d.isCompleted)return;const v=t.touches[0],M=setTimeout(()=>{u({task:d,x:v.clientX,y:v.clientY})},500);k(M)},ve=()=>{x&&(clearTimeout(x),k(null))},je=()=>{x&&(clearTimeout(x),k(null))};l.useEffect(()=>{if(i||r)return document.addEventListener("click",$),()=>document.removeEventListener("click",$)},[i,r]),l.useEffect(()=>()=>{x&&clearTimeout(x)},[x]);const ke=t=>{switch(t){case h.URGENT:return"bg-red-500";case h.HIGH:return"bg-orange-500";case h.MEDIUM:return"bg-yellow-500";case h.LOW:return"bg-green-500";default:return"bg-gray-500"}},we=["January","February","March","April","May","June","July","August","September","October","November","December"],Ne=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],G=(()=>{if(S.groupId){const t=R(S.groupId);return t?`${t.icon} ${t.name}`:"Unknown Group"}return null})();return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[we[N]," ",w]}),G&&e.jsxs("span",{className:"text-sm text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 px-2 py-1 rounded-full",children:["Filtered by: ",G]}),e.jsx("button",{onClick:ue,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Today"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:de,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Be,{className:"w-5 h-5"})}),e.jsx("button",{onClick:ge,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Re,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Ne.map(t=>e.jsx("div",{className:"p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400",children:t},t))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:C.map((t,d)=>{const v=ce(t.date),M=(f==null?void 0:f.toDateString())===t.date.toDateString();return e.jsxs("div",{className:`min-h-[96px] p-2 border border-gray-200 dark:border-gray-700 rounded-lg transition-colors cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${t.isCurrentMonth?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900"} ${t.isToday?"ring-2 ring-primary-500":""} ${M?"bg-primary-50 dark:bg-primary-900/20 border-primary-300 dark:border-primary-700 border-2":""}`,onDragOver:D=>he(D,t.date),onDragLeave:pe,onDrop:D=>ye(D,t.date),onDoubleClick:()=>F(t.date),title:"Double-click để xem tất cả công việc trong ngày",children:[e.jsx("div",{className:`text-sm font-medium mb-1 ${t.isCurrentMonth?t.isToday?"text-primary-600 dark:text-primary-400":"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-600"}`,children:t.day}),e.jsxs("div",{className:"space-y-1",children:[v.slice(0,4).map(D=>{const{task:j,isOverdue:E,urgencyLevel:T}=D,O=j.groupId?R(j.groupId):_(),De=Xe(j,T),Te=()=>E?"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200 border border-red-300 dark:border-red-700":T==="critical"?"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300 border border-red-200 dark:border-red-800":T==="urgent"?"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300 border border-orange-200 dark:border-orange-800":"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200";return e.jsx("div",{draggable:!j.isCompleted,className:`text-xs p-1 rounded truncate transition-all duration-200 ${Te()} cursor-move hover:opacity-80 ${(p==null?void 0:p.id)===j.id?"opacity-50 scale-95":""}`,title:`${j.title} - ${(O==null?void 0:O.name)||"Default"} ${E?"(OVERDUE)":T==="critical"?"(CRITICAL)":T==="urgent"?"(URGENT)":""}`,onDragStart:m=>{m.stopPropagation(),me(m,j)},onDragEnd:m=>{m.stopPropagation(),fe()},onDoubleClick:m=>{m.stopPropagation(),c(j)},onContextMenu:m=>{m.stopPropagation(),xe(m,j)},onTouchStart:m=>{m.stopPropagation(),be(m,j)},onTouchEnd:m=>{m.stopPropagation(),ve()},onTouchMove:m=>{m.stopPropagation(),je()},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-1 flex-1 min-w-0",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${ke(De)}`}),e.jsx("span",{className:"truncate",children:j.title}),E&&e.jsx("span",{className:"text-red-600 font-bold",title:"Overdue",children:"⚠"}),!E&&T==="critical"&&e.jsx("span",{className:"text-red-500 font-bold",title:"Critical urgency",children:"🔥"}),!E&&T==="urgent"&&e.jsx("span",{className:"text-orange-500 font-bold",title:"Urgent",children:"⚡"})]}),e.jsx("button",{className:"ml-1 text-gray-400 hover:text-gray-600 lg:hidden flex-shrink-0",onClick:m=>{m.stopPropagation();const W=m.currentTarget.getBoundingClientRect();u({task:j,x:W.right,y:W.bottom})},onDoubleClick:m=>m.stopPropagation(),"aria-label":"Tùy chọn task",children:"⋮"}),e.jsx("span",{className:"text-gray-400 text-xs hidden lg:block",children:"⋮⋮"})]})},j.id)}),v.length>4&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center cursor-pointer hover:text-gray-700 dark:hover:text-gray-300",onClick:D=>{D.stopPropagation(),F(t.date)},onDoubleClick:D=>D.stopPropagation(),title:"Click để xem tất cả công việc",children:["+",v.length-4," more"]})]})]},d)})}),e.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),e.jsx("span",{children:"Urgent"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),e.jsx("span",{children:"High"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),e.jsx("span",{children:"Medium"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Low"})]})]}),i&&e.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 z-50",style:{left:i.x,top:i.y},onClick:t=>t.stopPropagation(),children:[e.jsxs("button",{onClick:()=>U(i.task),className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Hoàn thành"})]}),e.jsxs("button",{onClick:()=>{c(i.task),g(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Chỉnh sửa"})]})]}),r&&e.jsxs("div",{className:"fixed bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 z-50",style:{left:r.x,top:r.y},onClick:t=>t.stopPropagation(),children:[e.jsxs("button",{onClick:()=>{U(r.task),u(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"Hoàn thành"})]}),e.jsxs("button",{onClick:()=>{c(r.task),u(null)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center space-x-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Chỉnh sửa"})]})]}),o&&e.jsx(Y,{task:o,onClose:()=>c(null),onSuccess:()=>c(null)}),e.jsx(Ze,{isOpen:X,onClose:()=>I(!1),selectedDate:Z,tasks:H})]})},st=()=>{const{tasks:s,loading:n,fetchTasks:a}=J(),[o,c]=l.useState(!1),[i,g]=l.useState({total:0,completed:0,pending:0,overdue:0});return l.useEffect(()=>{a()},[a]),l.useEffect(()=>{const p=new Date,y=s.filter(r=>r.status===P.COMPLETED).length,f=s.filter(r=>r.status!==P.COMPLETED).length,b=s.filter(r=>r.dueDate&&r.dueDate<p&&r.status!==P.COMPLETED).length;g({total:s.length,completed:y,pending:f,overdue:b})},[s]),n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(He,{size:"lg"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsxs("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",children:[e.jsx(Fe,{className:"w-5 h-5 mr-2"}),"New Task"]})]}),e.jsx(Ye,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(B,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.total})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(B,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.completed})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx($e,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.pending})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(Ue,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:i.overdue})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Calendar"})}),e.jsxs("div",{className:"p-6",children:[e.jsx(qe,{tasks:s}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Double-click vào ngày để xem chi tiết công việc"})})]})]}),o&&e.jsx(Y,{onClose:()=>c(!1),onSuccess:()=>c(!1)})]})};export{st as default};
