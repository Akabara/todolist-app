const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auth-DbZI5HnD.js","assets/vendor-C0uaCzFa.js","assets/firebase-vendor-CwXsO73q.js","assets/state-vendor-C6akDs4E.js","assets/DashboardPage-B3HFIudc.js","assets/calendar-06gnfMXl.js","assets/tasks-C0e7jIQ_.js"])))=>i.map(i=>d[i]);
import{r as d,q as L,j as e,F as R,s as A,c as C,L as p,t as E,v as P,H as D,w as y,x as h,y as O,R as _}from"./vendor-C0uaCzFa.js";import{u as N,l as T,b as g,L as u,P as F}from"./auth-DbZI5HnD.js";import{r as $}from"./firebase-vendor-CwXsO73q.js";import{G as b}from"./groups-BZk7iPJf.js";import{f as j,d as z}from"./calendar-06gnfMXl.js";import"./state-vendor-C6akDs4E.js";import"./tasks-C0e7jIQ_.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const I="modulepreload",U=function(i){return"/todolist-app/"+i},v={},f=function(l,n,c){let t=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=o?.nonce||o?.getAttribute("nonce");t=Promise.allSettled(n.map(a=>{if(a=U(a),a in v)return;v[a]=!0;const m=a.endsWith(".css"),k=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${k}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":I,m||(x.as="script"),x.crossOrigin="",x.href=a,s&&x.setAttribute("nonce",s),document.head.appendChild(x),m)return new Promise((w,S)=>{x.addEventListener("load",w),x.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${a}`)))})}))}function r(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return t.then(o=>{for(const s of o||[])s.status==="rejected"&&r(s.reason);return l().catch(r)})},H=({children:i})=>{const[l,n]=d.useState(!1),{user:c}=N(),t=L(),r=[{name:"Dashboard",href:"/",icon:A},{name:"Tasks",href:"/tasks",icon:C}],o=async()=>{await T()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsxs("div",{className:`fixed inset-0 z-40 lg:hidden ${l?"":"hidden"}`,children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),e.jsxs("div",{className:"relative flex w-full max-w-xs flex-1 flex-col bg-white dark:bg-gray-800",children:[e.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:e.jsx("button",{type:"button",className:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>n(!1),"aria-label":"Đóng menu điều hướng",children:e.jsx(R,{className:"h-6 w-6 text-white"})})}),e.jsxs("div",{className:"h-0 flex-1 overflow-y-auto pt-5 pb-4",children:[e.jsx("div",{className:"flex flex-shrink-0 items-center px-4",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Todo App"})}),e.jsx("nav",{className:"mt-5 space-y-1 px-2",children:r.map(s=>e.jsxs(p,{to:s.href,className:`group flex items-center px-2 py-2 text-base font-medium rounded-md ${t.pathname===s.href?"bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"}`,onClick:()=>n(!1),children:[e.jsx(s.icon,{className:"mr-4 h-6 w-6"}),s.name]},s.name))}),e.jsx("div",{className:"mt-6 px-2",children:e.jsx(b,{})})]})]})]}),e.jsx("div",{className:"hidden lg:flex lg:w-64 lg:flex-col lg:fixed lg:inset-y-0",children:e.jsxs("div",{className:"flex flex-1 flex-col min-h-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex flex-1 flex-col pt-5 pb-4 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center flex-shrink-0 px-4",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Todo App"})}),e.jsx("nav",{className:"mt-5 px-2 space-y-1",children:r.map(s=>e.jsxs(p,{to:s.href,className:`group flex items-center px-2 py-2 text-sm font-medium rounded-md ${t.pathname===s.href?"bg-primary-100 text-primary-900 dark:bg-primary-900 dark:text-primary-100":"text-gray-600 hover:bg-gray-50 hover:text-gray-900 dark:text-gray-300 dark:hover:bg-gray-700 dark:hover:text-white"}`,children:[e.jsx(s.icon,{className:"mr-3 h-6 w-6"}),s.name]},s.name))}),e.jsx("div",{className:"mt-6 px-2 flex-1",children:e.jsx(b,{})})]}),e.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{children:e.jsx(E,{className:"inline-block h-9 w-9 text-gray-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:c?.displayName||c?.email}),e.jsx("button",{onClick:o,className:"text-xs font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Sign out"})]})]})})]})}),e.jsxs("div",{className:"flex flex-1 flex-col lg:pl-64",children:[e.jsx("div",{className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 lg:hidden",children:e.jsxs("div",{className:"flex h-16 items-center justify-between px-4",children:[e.jsx("button",{type:"button",className:"border-r border-gray-200 px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:()=>n(!0),"aria-label":"Mở menu điều hướng",children:e.jsx(P,{className:"h-6 w-6"})}),e.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Todo App"}),e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:o,className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Sign out"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i})})})]})]})},q=()=>{const[i,l]=d.useState(!1),[n,c]=d.useState(null),[t,r]=d.useState(!0);d.useEffect(()=>{if(t){const a=setInterval(()=>{c(j.getDebugReport())},1e3);return()=>clearInterval(a)}},[t]);const o=()=>{c(j.getDebugReport())},s=()=>{const a={...n,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href};navigator.clipboard.writeText(JSON.stringify(a,null,2)),alert("Debug report copied to clipboard!")};return i?e.jsxs("div",{className:"fixed bottom-4 right-4 z-50 bg-gray-900 text-green-400 p-4 rounded-lg shadow-xl max-w-md max-h-96 overflow-auto font-mono text-xs",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-yellow-400 font-bold",children:"🔍 Firestore Debug"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r(!t),className:`px-2 py-1 rounded text-xs ${t?"bg-green-600":"bg-gray-600"}`,children:t?"⏸️":"▶️"}),e.jsx("button",{onClick:o,className:"bg-blue-600 px-2 py-1 rounded text-xs hover:bg-blue-700",children:"🔄"}),e.jsx("button",{onClick:s,className:"bg-purple-600 px-2 py-1 rounded text-xs hover:bg-purple-700",children:"📋"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-red-600 px-2 py-1 rounded text-xs hover:bg-red-700",children:"✕"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-yellow-400",children:"Current Auth:"}),e.jsxs("div",{className:"pl-2",children:["User: ",g.currentUser?"✅":"❌"," ",g.currentUser?.uid?.substring(0,8)]})]}),n?.authHistory&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-yellow-400",children:["Auth History (",n.authHistory.length,"):"]}),e.jsx("div",{className:"pl-2 max-h-32 overflow-y-auto",children:n.authHistory.slice(-5).map((a,m)=>e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:a.ready?"text-green-400":"text-red-400",children:new Date(a.timestamp).toLocaleTimeString()})," ",e.jsx("span",{className:a.user?"text-green-400":"text-red-400",children:a.user?"👤":"❌"})," ",e.jsx("span",{className:a.token?"text-green-400":"text-red-400",children:a.token?"🔑":"❌"})]},m))})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Auto-refresh: ",t?"ON":"OFF"," | Time: ",new Date().toLocaleTimeString()]})]})]}):e.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e.jsx("button",{onClick:()=>{l(!0),o()},className:"bg-red-500 text-white px-3 py-2 rounded-lg text-sm font-mono shadow-lg hover:bg-red-600",children:"🐛 Debug"})})},M=d.lazy(()=>f(()=>import("./auth-DbZI5HnD.js").then(i=>i.e),__vite__mapDeps([0,1,2,3]))),V=d.lazy(()=>f(()=>import("./DashboardPage-B3HFIudc.js"),__vite__mapDeps([4,1,5,3,2,0,6]))),B=d.lazy(()=>f(()=>import("./tasks-C0e7jIQ_.js").then(i=>i.a),__vite__mapDeps([6,1,5,3,2,0])));function G(){const{setUser:i,setLoading:l,loading:n}=N();return d.useEffect(()=>{const c=$(g,t=>{i(t?{uid:t.uid,email:t.email,displayName:t.displayName||void 0,photoURL:t.photoURL||void 0}:null),l(!1)});return()=>c()},[i,l]),n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(u,{})}):e.jsx(D,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(u,{size:"lg"})}),children:e.jsxs(y,{children:[e.jsx(h,{path:"/login",element:e.jsx(M,{})}),e.jsx(h,{path:"/*",element:e.jsx(F,{children:e.jsx(H,{children:e.jsx(d.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(u,{size:"lg"})}),children:e.jsxs(y,{children:[e.jsx(h,{path:"/",element:e.jsx(V,{})}),e.jsx(h,{path:"/tasks",element:e.jsx(B,{})})]})})})})})]})}),!1,e.jsx(q,{})]})})}const J=()=>{console.log("ℹ️ App Check skipped - no reCAPTCHA key provided")};J();O.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(z,{children:e.jsx(G,{})})}));
